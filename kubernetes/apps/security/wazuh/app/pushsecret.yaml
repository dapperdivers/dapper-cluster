---
# PushSecret syncs the generated passwords to Infisical
# This allows other apps/clusters to also pull these secrets
apiVersion: external-secrets.io/v1alpha1
kind: PushSecret
metadata:
  name: wazuh-passwords
spec:
  refreshInterval: 1h
  secretStoreRefs:
    - name: infisical
      kind: ClusterSecretStore
  selector:
    secret:
      name: wazuh-generated-passwords
  data:
    - match:
        secretKey: WAZUH_INDEXER_PASSWORD
        remoteRef:
          remoteKey: WAZUH_INDEXER_PASSWORD
    - match:
        secretKey: WAZUH_API_PASSWORD
        remoteRef:
          remoteKey: WAZUH_API_PASSWORD
    - match:
        secretKey: WAZUH_DASHBOARD_PASSWORD
        remoteRef:
          remoteKey: WAZUH_DASHBOARD_PASSWORD
