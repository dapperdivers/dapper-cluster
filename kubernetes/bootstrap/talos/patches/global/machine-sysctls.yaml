machine:
  sysctls:
    # File system watches
    fs.inotify.max_user_watches: "1048576" # Watchdog
    fs.inotify.max_user_instances: "8192"  # Watchdog
    # File handle limits
    fs.file-max: "2097152"
    fs.aio-max-nr: "1048576"
    # Network buffers for Cloudflared/QUIC
    net.core.rmem_max: "7500000" # Cloudflared | QUIC
    net.core.wmem_max: "7500000" # Cloudflared | QUIC
    # Network performance
    net.core.netdev_max_backlog: "5000"
    # Connection tracking
    net.netfilter.nf_conntrack_max: "131072"
    # TCP keepalive
    net.ipv4.tcp_keepalive_time: "600"
    net.ipv4.tcp_keepalive_intvl: "60"
    net.ipv4.tcp_keepalive_probes: "6"
    # VM tuning
    vm.swappiness: "10"
